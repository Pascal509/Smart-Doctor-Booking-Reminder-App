{"ast":null,"code":"import apiClient from '../utils/apiClient';\n\n/**\n * Fetches all doctors from the backend API\n * \n * @returns Promise<Doctor[]> - Array of all doctors\n * @throws Error - When the API request fails or returns an error\n */\nexport const getDoctors = async () => {\n  try {\n    const response = await apiClient.get('/doctors');\n    return response;\n  } catch (error) {\n    var _error$response;\n    if (error.status === 401) {\n      throw new Error('Authentication failed - please log in again');\n    }\n    const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.message) || error.message || 'Failed to fetch doctors';\n    throw new Error(message);\n  }\n};\n\n/**\n * Fetches doctors by specialty ID from the backend API\n * \n * @param specialtyId - The ID of the specialty to filter doctors by\n * @returns Promise<Doctor[]> - Array of doctors for the specified specialty\n * @throws ApiError - When the API request fails or returns an error\n * \n * OpenAPI Specification:\n * GET /api/v1/doctors?specialty_id={specialtyId}\n * \n * Success Response (200):\n * {\n *   \"message\": \"Doctors retrieved successfully\",\n *   \"data\": Doctor[]\n * }\n * \n * Error Response (404):\n * {\n *   \"error\": \"Not Found\",\n *   \"message\": \"No doctors found for the specified specialty\"\n * }\n */\nexport async function fetchDoctorsBySpecialty(specialtyId) {\n  // Validate input\n  if (!specialtyId || specialtyId <= 0) {\n    throw new ApiError('Invalid specialty ID. Must be a positive number.', 400);\n  }\n  const url = `${API_BASE_URL}/doctors?specialty_id=${specialtyId}`;\n  try {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const authHeader = getAuthHeader();\n    if (authHeader) {\n      headers['Authorization'] = authHeader;\n    }\n    const response = await fetch(url, {\n      method: 'GET',\n      headers\n    });\n\n    // Handle different HTTP status codes\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        error: 'Unknown Error',\n        message: `HTTP ${response.status}: ${response.statusText}`\n      }));\n\n      // Handle specific 404 case\n      if (response.status === 404) {\n        throw new ApiError(`No doctors found for specialty ID ${specialtyId}`, 404, errorData);\n      }\n\n      // Handle other error status codes\n      throw new ApiError(errorData.message || `Request failed with status ${response.status}`, response.status, errorData);\n    }\n\n    // Parse successful response\n    const apiResponse = await response.json();\n\n    // Validate response structure\n    if (!apiResponse.data || !Array.isArray(apiResponse.data)) {\n      throw new ApiError('Invalid response format from server', 500);\n    }\n    return apiResponse.data;\n  } catch (error) {\n    // Re-throw ApiError instances\n    if (error instanceof ApiError) {\n      throw error;\n    }\n\n    // Handle network errors and other exceptions\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new ApiError('Network error: Unable to connect to the server. Please check your internet connection.', 0);\n    }\n\n    // Handle JSON parsing errors\n    if (error instanceof SyntaxError) {\n      throw new ApiError('Server returned invalid response format', 500);\n    }\n\n    // Handle unknown errors\n    throw new ApiError(`Unexpected error: ${error instanceof Error ? error.message : 'Unknown error occurred'}`, 500);\n  }\n}\n\n/**\n * Alternative implementation using axios (commented out)\n * Uncomment and install axios if preferred: npm install axios\n */\n/*\nimport axios, { AxiosError } from 'axios';\n\nexport async function fetchDoctorsBySpecialtyAxios(specialtyId: number): Promise<Doctor[]> {\n  if (!specialtyId || specialtyId <= 0) {\n    throw new ApiError('Invalid specialty ID. Must be a positive number.', 400);\n  }\n\n  try {\n    const response = await axios.get<ApiResponse<Doctor[]>>(\n      `${API_BASE_URL}/doctors`,\n      {\n        params: { specialty_id: specialtyId },\n        headers: {\n          ...(getAuthToken() && { 'Authorization': `Bearer ${getAuthToken()}` })\n        }\n      }\n    );\n\n    return response.data.data;\n\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      const axiosError = error as AxiosError<ErrorResponse>;\n      \n      if (axiosError.response?.status === 404) {\n        throw new ApiError(\n          `No doctors found for specialty ID ${specialtyId}`,\n          404,\n          axiosError.response.data\n        );\n      }\n\n      throw new ApiError(\n        axiosError.response?.data?.message || axiosError.message,\n        axiosError.response?.status || 500,\n        axiosError.response?.data\n      );\n    }\n\n    throw new ApiError(\n      `Unexpected error: ${error instanceof Error ? error.message : 'Unknown error occurred'}`,\n      500\n    );\n  }\n}\n*/\n\n/**\n * Example usage:\n * \n * try {\n *   const doctors = await fetchDoctorsBySpecialty(5);\n *   console.log('Doctors found:', doctors);\n * } catch (error) {\n *   if (error instanceof ApiError) {\n *     if (error.status === 404) {\n *       console.log('No doctors found for this specialty');\n *     } else {\n *       console.error('API Error:', error.message);\n *     }\n *   }\n * }\n */","map":{"version":3,"names":["apiClient","getDoctors","response","get","error","_error$response","status","Error","message","fetchDoctorsBySpecialty","specialtyId","ApiError","url","API_BASE_URL","headers","authHeader","getAuthHeader","fetch","method","ok","errorData","json","catch","statusText","apiResponse","data","Array","isArray","TypeError","includes","SyntaxError"],"sources":["C:/Users/HP/Smart-Doctor-Booking-Reminder-App/frontend/src/services/doctorApi.ts"],"sourcesContent":["import { Doctor } from '../types/auth';\nimport apiClient from '../utils/apiClient';\n\n/**\n * Fetches all doctors from the backend API\n * \n * @returns Promise<Doctor[]> - Array of all doctors\n * @throws Error - When the API request fails or returns an error\n */\nexport const getDoctors = async (): Promise<Doctor[]> => {\n  try {\n    const response = await apiClient.get<Doctor[]>('/doctors');\n    return response;\n  } catch (error: any) {\n    if (error.status === 401) {\n      throw new Error('Authentication failed - please log in again');\n    }\n    \n    const message = error.response?.message || error.message || 'Failed to fetch doctors';\n    throw new Error(message);\n  }\n};\n\n/**\n * Fetches doctors by specialty ID from the backend API\n * \n * @param specialtyId - The ID of the specialty to filter doctors by\n * @returns Promise<Doctor[]> - Array of doctors for the specified specialty\n * @throws ApiError - When the API request fails or returns an error\n * \n * OpenAPI Specification:\n * GET /api/v1/doctors?specialty_id={specialtyId}\n * \n * Success Response (200):\n * {\n *   \"message\": \"Doctors retrieved successfully\",\n *   \"data\": Doctor[]\n * }\n * \n * Error Response (404):\n * {\n *   \"error\": \"Not Found\",\n *   \"message\": \"No doctors found for the specified specialty\"\n * }\n */\nexport async function fetchDoctorsBySpecialty(specialtyId: number): Promise<Doctor[]> {\n  // Validate input\n  if (!specialtyId || specialtyId <= 0) {\n    throw new ApiError('Invalid specialty ID. Must be a positive number.', 400);\n  }\n\n  const url = `${API_BASE_URL}/doctors?specialty_id=${specialtyId}`;\n  \n  try {\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json'\n    };\n    \n    const authHeader = getAuthHeader();\n    if (authHeader) {\n      headers['Authorization'] = authHeader;\n    }\n    \n    const response = await fetch(url, {\n      method: 'GET',\n      headers,\n    });\n\n    // Handle different HTTP status codes\n    if (!response.ok) {\n      const errorData: ErrorResponse = await response.json().catch(() => ({\n        error: 'Unknown Error',\n        message: `HTTP ${response.status}: ${response.statusText}`\n      }));\n\n      // Handle specific 404 case\n      if (response.status === 404) {\n        throw new ApiError(\n          `No doctors found for specialty ID ${specialtyId}`,\n          404,\n          errorData\n        );\n      }\n\n      // Handle other error status codes\n      throw new ApiError(\n        errorData.message || `Request failed with status ${response.status}`,\n        response.status,\n        errorData\n      );\n    }\n\n    // Parse successful response\n    const apiResponse: ApiResponse<Doctor[]> = await response.json();\n    \n    // Validate response structure\n    if (!apiResponse.data || !Array.isArray(apiResponse.data)) {\n      throw new ApiError('Invalid response format from server', 500);\n    }\n\n    return apiResponse.data;\n\n  } catch (error) {\n    // Re-throw ApiError instances\n    if (error instanceof ApiError) {\n      throw error;\n    }\n\n    // Handle network errors and other exceptions\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new ApiError(\n        'Network error: Unable to connect to the server. Please check your internet connection.',\n        0\n      );\n    }\n\n    // Handle JSON parsing errors\n    if (error instanceof SyntaxError) {\n      throw new ApiError(\n        'Server returned invalid response format',\n        500\n      );\n    }\n\n    // Handle unknown errors\n    throw new ApiError(\n      `Unexpected error: ${error instanceof Error ? error.message : 'Unknown error occurred'}`,\n      500\n    );\n  }\n}\n\n/**\n * Alternative implementation using axios (commented out)\n * Uncomment and install axios if preferred: npm install axios\n */\n/*\nimport axios, { AxiosError } from 'axios';\n\nexport async function fetchDoctorsBySpecialtyAxios(specialtyId: number): Promise<Doctor[]> {\n  if (!specialtyId || specialtyId <= 0) {\n    throw new ApiError('Invalid specialty ID. Must be a positive number.', 400);\n  }\n\n  try {\n    const response = await axios.get<ApiResponse<Doctor[]>>(\n      `${API_BASE_URL}/doctors`,\n      {\n        params: { specialty_id: specialtyId },\n        headers: {\n          ...(getAuthToken() && { 'Authorization': `Bearer ${getAuthToken()}` })\n        }\n      }\n    );\n\n    return response.data.data;\n\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      const axiosError = error as AxiosError<ErrorResponse>;\n      \n      if (axiosError.response?.status === 404) {\n        throw new ApiError(\n          `No doctors found for specialty ID ${specialtyId}`,\n          404,\n          axiosError.response.data\n        );\n      }\n\n      throw new ApiError(\n        axiosError.response?.data?.message || axiosError.message,\n        axiosError.response?.status || 500,\n        axiosError.response?.data\n      );\n    }\n\n    throw new ApiError(\n      `Unexpected error: ${error instanceof Error ? error.message : 'Unknown error occurred'}`,\n      500\n    );\n  }\n}\n*/\n\n\n\n/**\n * Example usage:\n * \n * try {\n *   const doctors = await fetchDoctorsBySpecialty(5);\n *   console.log('Doctors found:', doctors);\n * } catch (error) {\n *   if (error instanceof ApiError) {\n *     if (error.status === 404) {\n *       console.log('No doctors found for this specialty');\n *     } else {\n *       console.error('API Error:', error.message);\n *     }\n *   }\n * }\n */"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}